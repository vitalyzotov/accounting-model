<svg id="mermaid-1634457955739" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="597" style="max-width: 998.5px;" viewBox="-20 -20 998.5 597"><style>#mermaid-1634457955739{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1634457955739 .error-icon{fill:#552222;}#mermaid-1634457955739 .error-text{fill:#552222;stroke:#552222;}#mermaid-1634457955739 .edge-thickness-normal{stroke-width:2px;}#mermaid-1634457955739 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1634457955739 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1634457955739 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1634457955739 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1634457955739 .marker{fill:#333333;stroke:#333333;}#mermaid-1634457955739 .marker.cross{stroke:#333333;}#mermaid-1634457955739 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1634457955739 g.classGroup text{fill:#9370DB;fill:#131300;stroke:none;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:10px;}#mermaid-1634457955739 g.classGroup text .title{font-weight:bolder;}#mermaid-1634457955739 .classTitle{font-weight:bolder;}#mermaid-1634457955739 .node rect,#mermaid-1634457955739 .node circle,#mermaid-1634457955739 .node ellipse,#mermaid-1634457955739 .node polygon,#mermaid-1634457955739 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1634457955739 .divider{stroke:#9370DB;stroke:1;}#mermaid-1634457955739 g.clickable{cursor:pointer;}#mermaid-1634457955739 g.classGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-1634457955739 g.classGroup line{stroke:#9370DB;stroke-width:1;}#mermaid-1634457955739 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-1634457955739 .classLabel .label{fill:#9370DB;font-size:10px;}#mermaid-1634457955739 .relation{stroke:#333333;stroke-width:1;fill:none;}#mermaid-1634457955739 .dashed-line{stroke-dasharray:3;}#mermaid-1634457955739 #compositionStart,#mermaid-1634457955739 .composition{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1634457955739 #compositionEnd,#mermaid-1634457955739 .composition{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1634457955739 #dependencyStart,#mermaid-1634457955739 .dependency{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1634457955739 #dependencyStart,#mermaid-1634457955739 .dependency{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1634457955739 #extensionStart,#mermaid-1634457955739 .extension{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1634457955739 #extensionEnd,#mermaid-1634457955739 .extension{fill:#333333 !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1634457955739 #aggregationStart,#mermaid-1634457955739 .aggregation{fill:#ECECFF !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1634457955739 #aggregationEnd,#mermaid-1634457955739 .aggregation{fill:#ECECFF !important;stroke:#333333 !important;stroke-width:1;}#mermaid-1634457955739 .edgeTerminals{font-size:11px;}#mermaid-1634457955739:root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-1634457955739 class{fill:apa;}</style><g></g><defs><marker id="extensionStart" class="extension" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 1,7 L18,13 V 1 Z"></path></marker></defs><defs><marker id="extensionEnd" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 1,1 V 13 L18,7 Z"></path></marker></defs><defs><marker id="compositionStart" class="extension" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="compositionEnd" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="aggregationStart" class="extension" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="aggregationEnd" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="dependencyStart" class="extension" refX="0" refY="7" markerWidth="190" markerHeight="240" orient="auto"><path d="M 5,7 L9,13 L1,7 L9,1 Z"></path></marker></defs><defs><marker id="dependencyEnd" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g id="classid-Balance-0" class="classGroup" transform="translate(678,496 )"><rect x="0" y="0" width="150" height="61" class=" "></rect><text y="15" x="0"><tspan class="title" x="55">Balance</tspan></text><line x1="0" y1="21" y2="21" x2="150"></line><text x="5" y="31" fill="white" class="classText"><tspan x="5">- remain: Remain</tspan><tspan x="5" dy="10">- value: Money</tspan><tspan x="5" dy="10">- operations: List&lt;Operation&gt;</tspan></text><line x1="0" y1="57" y2="57" x2="150"></line><text x="5" y="72" fill="white" class="classText"></text></g><g id="classid-AccountMovement-1" class="classGroup" transform="translate(797.5,354.5 )"><rect x="0" y="0" width="161" height="61" class=" "></rect><text y="15" x="0"><tspan class="title" x="35">AccountMovement</tspan></text><line x1="0" y1="21" y2="21" x2="161"></line><text x="5" y="31" fill="white" class="classText"><tspan x="5">- start: Remain</tspan><tspan x="5" dy="10">- finish: Remain</tspan><tspan x="5" dy="10">- operations: List&lt;BankRecord&gt;</tspan></text><line x1="0" y1="57" y2="57" x2="161"></line><text x="5" y="72" fill="white" class="classText"></text></g><g id="classid-Budget-2" class="classGroup" transform="translate(0,0 )"><rect x="0" y="0" width="132" height="92" class=" "></rect><text y="15" x="0"><tspan x="24.5">«AggregateRoot»</tspan><tspan class="title" dy="10" x="48.5">Budget</tspan></text><line x1="0" y1="32" y2="32" x2="132"></line><text x="5" y="42" fill="white" class="classText"><tspan x="5">- budgetId: BudgetId</tspan><tspan x="5" dy="10">- name: String</tspan><tspan x="5" dy="10">- rules: Set&lt;BudgetRule&gt;</tspan><tspan x="5" dy="10">- locale: String</tspan><tspan x="5" dy="10">- currency: Currency</tspan></text><line x1="0" y1="88" y2="88" x2="132"></line><text x="5" y="103" fill="white" class="classText"></text></g><g id="classid-BudgetId-3" class="classGroup" transform="translate(39.5,192.5 )"><rect x="0" y="0" width="53" height="31" class=" "></rect><text y="15" x="0"><tspan class="title" x="5">BudgetId</tspan></text><line x1="0" y1="22" y2="22" x2="53"></line><text x="5" y="32" fill="white" class="classText"></text><line x1="0" y1="27" y2="27" x2="53"></line><text x="5" y="42" fill="white" class="classText"></text></g><g id="classid-BudgetRule-4" class="classGroup" transform="translate(177.5,142 )"><rect x="0" y="0" width="174" height="132" class=" "></rect><text y="15" x="0"><tspan class="title" x="59">BudgetRule</tspan></text><line x1="0" y1="22" y2="22" x2="174"></line><text x="5" y="32" fill="white" class="classText"><tspan x="5">+ ruleId: BudgetRuleId</tspan><tspan x="5" dy="10">+ type: BudgetRuleType</tspan><tspan x="5" dy="10">+ name: String</tspan><tspan x="5" dy="10">+ sourceAccount: AccountNumber</tspan><tspan x="5" dy="10">+ targetAccount: AccountNumber</tspan><tspan x="5" dy="10">+ categoryId: BudgetCategoryId</tspan><tspan x="5" dy="10">+ recurrence: Recurrence</tspan><tspan x="5" dy="10">+ value: Money</tspan><tspan x="5" dy="10">+ calculation: Calculation</tspan><tspan x="5" dy="10">+ enabled: boolean</tspan></text><line x1="0" y1="128" y2="128" x2="174"></line><text x="5" y="143" fill="white" class="classText"></text></g><g id="classid-BudgetBalance-5" class="classGroup" transform="translate(658,167 )"><rect x="0" y="0" width="194" height="82" class=" "></rect><text y="15" x="0"><tspan class="title" x="60">BudgetBalance</tspan></text><line x1="0" y1="22" y2="22" x2="194"></line><text x="5" y="32" fill="white" class="classText"><tspan x="5">- from: LocalDate</tspan><tspan x="5" dy="10">- to: LocalDate</tspan><tspan x="5" dy="10">- items: List&lt;BudgetPlan&gt;</tspan><tspan x="5" dy="10">- remains: List&lt;Remain&gt;</tspan><tspan x="5" dy="10">- movements: List&lt;AccountMovement&gt;</tspan></text><line x1="0" y1="78" y2="78" x2="194"></line><text x="5" y="93" fill="white" class="classText"></text></g><g id="classid-BudgetDirection-6" class="classGroup" transform="translate(239,506 )"><rect x="0" y="0" width="158" height="41" class=" "></rect><text y="15" x="0"><tspan x="44">«enumeration»</tspan><tspan class="title" dy="10" x="40">BudgetDirection</tspan></text><line x1="0" y1="32" y2="32" x2="158"></line><text x="5" y="42" fill="white" class="classText"></text><line x1="0" y1="37" y2="37" x2="158"></line><text x="5" y="52" fill="white" class="classText"></text></g><g id="classid-BudgetPlan-7" class="classGroup" transform="translate(325.25,324 )"><rect x="0" y="0" width="152" height="122" class=" "></rect><text y="15" x="0"><tspan x="34.5">«AggregateRoot»</tspan><tspan class="title" dy="10" x="48">BudgetPlan</tspan></text><line x1="0" y1="32" y2="32" x2="152"></line><text x="5" y="42" fill="white" class="classText"><tspan x="5">- itemId: BudgetPlanId</tspan><tspan x="5" dy="10">- direction: BudgetDirection</tspan><tspan x="5" dy="10">- source: AccountNumber</tspan><tspan x="5" dy="10">- target: AccountNumber</tspan><tspan x="5" dy="10">- category: BudgetCategoryId</tspan><tspan x="5" dy="10">- value: Money</tspan><tspan x="5" dy="10">- rule: BudgetRule</tspan><tspan x="5" dy="10">- date: LocalDate</tspan></text><line x1="0" y1="118" y2="118" x2="152"></line><text x="5" y="133" fill="white" class="classText"></text></g><g id="classid-BudgetPlanId-8" class="classGroup" transform="translate(447,511 )"><rect x="0" y="0" width="75" height="31" class=" "></rect><text y="15" x="0"><tspan class="title" x="5">BudgetPlanId</tspan></text><line x1="0" y1="22" y2="22" x2="75"></line><text x="5" y="32" fill="white" class="classText"></text><line x1="0" y1="27" y2="27" x2="75"></line><text x="5" y="42" fill="white" class="classText"></text></g><g id="classid-BudgetRuleId-9" class="classGroup" transform="translate(202,30.5 )"><rect x="0" y="0" width="75" height="31" class=" "></rect><text y="15" x="0"><tspan class="title" x="5">BudgetRuleId</tspan></text><line x1="0" y1="22" y2="22" x2="75"></line><text x="5" y="32" fill="white" class="classText"></text><line x1="0" y1="27" y2="27" x2="75"></line><text x="5" y="42" fill="white" class="classText"></text></g><g id="classid-BudgetRuleType-10" class="classGroup" transform="translate(327,25.5 )"><rect x="0" y="0" width="159" height="41" class=" "></rect><text y="15" x="0"><tspan x="44.5">«enumeration»</tspan><tspan class="title" dy="10" x="40">BudgetRuleType</tspan></text><line x1="0" y1="32" y2="32" x2="159"></line><text x="5" y="42" fill="white" class="classText"></text><line x1="0" y1="37" y2="37" x2="159"></line><text x="5" y="52" fill="white" class="classText"></text></g><g id="classid-Calculation-11" class="classGroup" transform="translate(20.25,356 )"><rect x="0" y="0" width="255" height="58" class=" "></rect><text y="15" x="0"><tspan class="title" x="100">Calculation</tspan></text><line x1="0" y1="21" y2="21" x2="255"></line><text x="5" y="31" fill="white" class="classText"><tspan x="5">- expression: String</tspan></text><line x1="0" y1="37" y2="37" x2="255"></line><text x="5" y="52" fill="white" class="classText"><tspan x="5">+calculate(Map&lt;String, Object&gt; arguments) : Money</tspan></text></g><g id="classid-Remain-12" class="classGroup" transform="translate(605.5,344.5 )"><rect x="0" y="0" width="142" height="81" class=" "></rect><text y="15" x="0"><tspan x="29.5">«AggregateRoot»</tspan><tspan class="title" dy="10" x="52.5">Remain</tspan></text><line x1="0" y1="31" y2="31" x2="142"></line><text x="5" y="41" fill="white" class="classText"><tspan x="5">+ remainId: RemainId</tspan><tspan x="5" dy="10">+ date: LocalDate</tspan><tspan x="5" dy="10">+ account: AccountNumber</tspan><tspan x="5" dy="10">+ value: Money</tspan></text><line x1="0" y1="77" y2="77" x2="142"></line><text x="5" y="92" fill="white" class="classText"></text></g><g id="classid-RemainId-13" class="classGroup" transform="translate(572,511.5 )"><rect x="0" y="0" width="56" height="30" class=" "></rect><text y="15" x="0"><tspan class="title" x="5">RemainId</tspan></text><line x1="0" y1="21" y2="21" x2="56"></line><text x="5" y="31" fill="white" class="classText"></text><line x1="0" y1="26" y2="26" x2="56"></line><text x="5" y="41" fill="white" class="classText"></text></g><path d="M179.82417582417582,274L174.47847985347985,278.1666666666667C169.13278388278388,282.3333333333333,158.44139194139194,290.6666666666667,153.09569597069597,304.3333333333333C147.75,318,147.75,337,147.75,346.5L147.75,356" id="edge0" class="relation"></path><path d="M66,92L66,96.16666666666667C66,100.33333333333333,66,108.66666666666667,66,125.41666666666667C66,142.16666666666666,66,167.33333333333334,66,179.91666666666666L66,192.5" id="edge1" class="relation"></path><path d="M132,87.93288590604027L139.625,92.77740492170022C147.25,97.62192393736018,162.5,107.31096196868009,174.09706959706958,116.32214765100672C185.69413919413918,125.33333333333333,193.6382783882784,133.66666666666666,197.61034798534797,137.83333333333334L201.58241758241758,142" id="edge2" class="relation" marker-start="url(#compositionStart)"></path><path d="M342.2005813953488,446L338.1671511627907,450.1666666666667C334.1337209302325,454.3333333333333,326.06686046511624,462.6666666666667,322.03343023255815,472.6666666666667C318,482.6666666666667,318,494.3333333333333,318,500.1666666666667L318,506" id="edge3" class="relation" marker-start="url(#compositionStart)"></path><path d="M460.2994186046512,446L464.33284883720927,450.1666666666667C468.3662790697675,454.3333333333333,476.43313953488376,462.6666666666667,480.46656976744185,473.5C484.5,484.3333333333333,484.5,497.6666666666667,484.5,504.3333333333333L484.5,511" id="edge4" class="relation" marker-start="url(#compositionStart)"></path><path d="M351.5,270.46153846153845L358.125,275.21794871794873C364.75,279.97435897435895,378,289.4871794871795,385.109496124031,298.4102564102564C392.218992248062,307.3333333333333,393.18798449612405,315.6666666666667,393.67248062015506,319.8333333333333L394.15697674418607,324" id="edge5" class="relation"></path><path d="M239.5,61.5L239.5,70.75C239.5,80,239.5,98.5,240.64468864468867,111.91666666666667C241.78937728937728,125.33333333333333,244.07875457875457,133.66666666666666,245.22344322344324,137.83333333333334L246.36813186813185,142" id="edge6" class="relation" marker-end="url(#compositionEnd)"></path><path d="M406.5,66.5L406.5,74.91666666666667C406.5,83.33333333333333,406.5,100.16666666666667,397.3333333333333,114.45774647887323C388.1666666666667,128.7488262910798,369.8333333333333,140.49765258215962,360.6666666666667,146.37206572769952L351.5,152.24647887323943" id="edge7" class="relation"></path><path d="M658,247.6273849607183L637.0416666666666,256.1894874672652C616.0833333333334,264.7515899738122,574.1666666666666,281.8757949869061,544.0416666666666,296.45570919828765C513.9166666666666,311.0356234096692,495.5833333333333,323.07124681933846,486.4166666666667,329.089058524173L477.25,335.10687022900765" id="edge8" class="relation" marker-start="url(#compositionStart)"></path><path d="M719.6318681318681,249L712.4432234432234,257.3333333333333C705.2545787545787,265.6666666666667,690.8772893772893,282.3333333333333,683.6886446886447,298.25C676.5,314.1666666666667,676.5,329.3333333333333,676.5,336.9166666666667L676.5,344.5" id="edge9" class="relation" marker-start="url(#compositionStart)"></path><path d="M810.4175824175824,249L821.6813186813187,257.3333333333333C832.9450549450548,265.6666666666667,855.4725274725274,282.3333333333333,866.7362637362638,299.9166666666667C878,317.5,878,336,878,345.25L878,354.5" id="edge10" class="relation" marker-start="url(#compositionStart)"></path><path d="M640.4738372093024,425.5L633.7281976744187,433.0833333333333C626.982558139535,440.6666666666667,613.4912790697675,455.8333333333333,606.7456395348837,470.1666666666667C600,484.5,600,498,600,504.75L600,511.5" id="edge11" class="relation" marker-start="url(#compositionStart)"></path><path d="M712.5261627906976,425.5L719.2718023255815,433.0833333333333C726.017441860465,440.6666666666667,739.5087209302325,455.8333333333333,746.2543604651163,467.5833333333333C753,479.3333333333333,753,487.6666666666667,753,491.8333333333333L753,496" id="edge12" class="relation"></path></svg>